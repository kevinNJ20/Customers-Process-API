#%RAML 1.0
title: Customers Process API
version: 1.0.0
baseUri: http://localhost:8082/api/process/customers
mediaType: application/json

documentation:
  - title: Overview
    content: API de processus pour orchestrer la synchronisation des clients entre Core Banking, Global Data et Salesforce

types:
  Customer:
    type: object
    properties:
      id?: string
      globalId?: string
      customerNumber?: string
      party:
        type: object
        properties:
          partyType: string
          firstName?: string
          lastName?: string
          taxId?: string
      status?: string
    example:
      globalId: "c1c27e05-7e59-4f39-a7f6-7ffe9ee10d64"
      customerNumber: "CUST-000001"
      party:
        partyType: "Individual"
        firstName: "John"
        lastName: "Doe"
        taxId: "TAX-123456"
      status: "Active"
  ErrorResponse:
    type: object
    properties:
      error:
        type: object
        properties:
          code: string
          message: string
    example:
      error:
        code: "NOT_FOUND"
        message: "Customer not found"

/customers:
  displayName: Customers
  description: Op√©rations sur les clients
  
  get:
    displayName: Get Customers from Global Data
    queryParameters:
      limit:
        type: integer
        required: false
        default: 100
      offset:
        type: integer
        required: false
        default: 0
      globalId:
        type: string
        required: false
    responses:
      200:
        body:
          application/json:
            type: Customer[]
      400:
        body:
          application/json:
            type: ErrorResponse

  post:
    displayName: Sync Customer
    description: Synchronise un client vers Global Data, Core Banking et Salesforce
    body:
      application/json:
        type: Customer
        example:
          globalId: "c1c27e05-7e59-4f39-a7f6-7ffe9ee10d64"
          customerNumber: "CUST-000001"
          party:
            partyType: "Individual"
            firstName: "John"
            lastName: "Doe"
            taxId: "TAX-123456"
          status: "Active"
    responses:
      200:
        body:
          application/json:
            type: Customer
      201:
        body:
          application/json:
            type: Customer

  /{customerGlobalId}:
    displayName: Customer by Global ID
    uriParameters:
      customerGlobalId:
        type: string
    get:
      displayName: Get Customer by Global ID
      responses:
        200:
          body:
            application/json:
              type: Customer
        404:
          body:
            application/json:
              type: ErrorResponse

  /lookup:
    displayName: Lookup Customer
    post:
      displayName: Lookup Customer by External ID
      description: Recherche un client par identifiant externe
      body:
        application/json:
          type: object
          properties:
            externalId:
              type: string
              description: Identifiant externe du client
            externalIdType:
              type: string
              description: Type d'identifiant externe
          example:
            externalId: "SF-001"
            externalIdType: "Salesforce"
      responses:
        200:
          body:
            application/json:
              type: Customer
        400:
          body:
            application/json:
              type: ErrorResponse
        404:
          body:
            application/json:
              type: ErrorResponse
        500:
          body:
            application/json:
              type: ErrorResponse

